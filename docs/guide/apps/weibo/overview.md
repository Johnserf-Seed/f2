---
outline: [2,3]
---

# æ¥å£åˆ—è¡¨

::: tip æ³¨æ„
ğŸŸ¢ä»£è¡¨å·²ç»å®ç°ï¼ŒğŸŸ¡ä»£è¡¨æ­£åœ¨å®ç°æˆ–ä¿®æ”¹ï¼ŒğŸŸ¤ä»£è¡¨æš‚æ—¶ä¸å®ç°ï¼ŒğŸ”µä»£è¡¨æœªæ¥å¯èƒ½å®ç°ï¼ŒğŸ”´ä»£è¡¨å°†ä¼šå¼ƒç”¨ã€‚
:::

::: details handleræ¥å£åˆ—è¡¨

|     CLIæ¥å£          |         æ–¹æ³•         |
| :------------------ | :------------------- |
|  ä¸‹è½½å•ä¸ªå¾®åš         | `handle_one_weibo`   |
|  ä¸‹è½½ç”¨æˆ·å¾®åš         | `handle_user_weibo`  |

|     æ•°æ®æ–¹æ³•æ¥å£      |         æ–¹æ³•           | å¼€å‘è€…æ¥å£   |
| :------------------ | :-------------------  | :--------: |
| åˆ›å»ºç”¨æˆ·è®°å½•ä¸ç›®å½•      | `get_or_add_user_data`|     ğŸŸ¢    |
| è·å–ç”¨æˆ·ä¿¡æ¯(uid)      | `fetch_user_info`     |     ğŸŸ¢      |
| è·å–ç”¨æˆ·ä¿¡æ¯(æ˜µç§°)     | `fetch_user_info_by_screen_name` |     ğŸŸ¢      |
| è·å–ç”¨æˆ·è¯¦æƒ…           | `fetch_user_detail`     |     ğŸŸ¢      |
| æå–å¾®åšç”¨æˆ·id         | `extract_weibo_uid`     |     ğŸŸ¢      |
| å•ä¸ªå¾®åšæ•°æ®          | `fetch_one_weibo`        |     ğŸŸ¢      |
| ç”¨æˆ·å¾®åšæ•°æ®          | `fetch_user_weibo`       |     ğŸŸ¢      |
:::

::: details utilsæ¥å£åˆ—è¡¨

| å·¥å…·ç±»æ¥å£          | ç±»å                      | æ–¹æ³•                           | çŠ¶æ€ |
| :------------------ | :------------------------ | :---------------------------- | :--: |
| ç®¡ç†å®¢æˆ·ç«¯é…ç½®       | `ClientConfManager`       |                               |  ğŸŸ¢  |
| ç”Ÿæˆè®¿å®¢ Cookie      | `VisitorManager`          | `gen_visitor`                 |  ğŸŸ¢  |
| æå–å¾®åš ID          | `WeiboIdFetcher`          | `get_weibo_id`                |  ğŸŸ¢  |
| æå–åˆ—è¡¨å¾®åš ID      | `WeiboIdFetcher`          | `get_all_weibo_id`            |  ğŸŸ¢  |
| æå–å¾®åšç”¨æˆ· ID      | `WeiboUidFetcher`         | `get_weibo_uid`               |  ğŸŸ¢  |
| æå–åˆ—è¡¨å¾®åšç”¨æˆ· ID  | `WeiboUidFetcher`         | `get_all_weibo_uid`           |  ğŸŸ¢  |
| æå–å¾®åšç”¨æˆ·æ˜µç§°     | `WeiboScreenNameFetcher`  | `get_weibo_screen_name`       |  ğŸŸ¢  |
| æå–åˆ—è¡¨å¾®åšç”¨æˆ·æ˜µç§° | `WeiboScreenNameFetcher`  | `get_all_weibo_screen_name`   |  ğŸŸ¢  |
| å…¨å±€æ ¼å¼åŒ–æ–‡ä»¶å     | -                         | `format_file_name`            |  ğŸŸ¢  |
| åˆ›å»ºç”¨æˆ·ç›®å½•         | -                         | `create_user_folder`          |  ğŸŸ¢  |
| é‡å‘½åç”¨æˆ·ç›®å½•       | -                         | `rename_user_folder`          |  ğŸŸ¢  |
| åˆ›å»ºæˆ–é‡å‘½åç”¨æˆ·ç›®å½• | -                         | `create_or_rename_user_folder`|  ğŸŸ¢  |
| æå–å¾®åšæ–‡æ¡ˆ         | -                         | `extract_desc`                |  ğŸŸ¢  |
:::

::: details crawleræ¥å£åˆ—è¡¨

| çˆ¬è™«urlæ¥å£    | ç±»å       | æ–¹æ³•          | çŠ¶æ€ |
| :----------- | :--------- | :----------  | :----: |
| ç”¨æˆ·ä¿¡æ¯æ¥å£ | `WeiboCrawler` | `fetch_user_info` | ğŸŸ¢ |
| ç”¨æˆ·è¯¦æƒ…æ¥å£ | `WeiboCrawler` | `fetch_user_detail` | ğŸŸ¢ |
| ç”¨æˆ·å¾®åšæ¥å£ | `WeiboCrawler` | `fetch_user_weibo` | ğŸŸ¢ |
| å•æ¡å¾®åšæ¥å£ | `WeiboCrawler` | `fetch_weibo_detail` | ğŸŸ¢ |
:::

::: details dlæ¥å£åˆ—è¡¨
| ä¸‹è½½å™¨æ¥å£     | ç±»å        | æ–¹æ³•          | çŠ¶æ€ |
| :----------- | :--------- | :----------  | :--: |
| åˆ›å»ºä¸‹è½½ä»»åŠ¡   | `WeiboDownloader` | `create_download_task` |  ğŸŸ¢  |
| å¤„ç†ä¸‹è½½ä»»åŠ¡   | `WeiboDownloader` | `handler_download` |  ğŸŸ¢  |
| ä¸‹è½½æ–‡æ¡ˆ      | `WeiboDownloader` | `download_desc`    |  ğŸŸ¢  |
| ä¸‹è½½è§†é¢‘      | `WeiboDownloader` | `download_video`   |  ğŸŸ¢  |
| ä¸‹è½½å›¾é›†      | `WeiboDownloader` | `download_images`  |  ğŸŸ¢  |
:::

::: tip :bulb: æç¤º
- ç¿»é¡µå‚æ•°éƒ½åŒ…å«åœ¨ä¸Šä¸€æ¬¡è¯·æ±‚çš„æ•°æ®ä¸­ï¼Œé€šè¿‡å†…ç½®çš„ `filter` è¿‡æ»¤å™¨å¯ä»¥å¾ˆæ–¹ä¾¿çš„è·å–ã€‚
- æ‰€æœ‰åŒ…å«ç¿»é¡µå‚æ•°çš„æ¥å£å‡ä½¿ç”¨å¼‚æ­¥ç”Ÿæˆå™¨æ–¹æ³•ï¼Œéœ€è¦é€šè¿‡ `async for` è¿›è¡Œè¿­ä»£ï¼Œä¾¿äºè‡ªåŠ¨å¤„ç†ç¿»é¡µã€‚
- å½“ `max_counts` è®¾ç½®ä¸º `None` æˆ–ä¸ä¼ å…¥æ—¶ï¼Œå°†ä¼šè·å–æ‰€æœ‰çš„å¾®åšæ•°æ®ã€‚
- åœ¨ä¸€äº›åç«¯æ¡†æ¶ `FastAPI`ã€`Flask`ã€`Django` ä¸­å¯ä»¥æ–¹ä¾¿çš„é›†æˆç­‰ã€‚
- ä½¿ç”¨ç™»å½•çš„ `cookie` å¯ä»¥æ— è§†è¯¥è´¦å·çš„ç§å¯†è®¾ç½®ã€‚
:::

## handleræ¥å£åˆ—è¡¨

### åˆ›å»ºç”¨æˆ·è®°å½•ä¸ç›®å½• ğŸŸ¢

å¼‚æ­¥æ–¹æ³•ï¼Œç”¨äºè·å–æˆ–åˆ›å»ºç”¨æˆ·æ•°æ®åŒæ—¶åˆ›å»ºç”¨æˆ·ç›®å½•ã€‚

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| kwargs | dict | cliå­—å…¸æ•°æ®ï¼Œéœ€è·å–pathå‚æ•° |
| user_id| str | ç”¨æˆ·ID |
| db | AsyncUserDB | ç”¨æˆ·æ•°æ®åº“ |

| è¿”å› | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| user_path | Path | ç”¨æˆ·ç›®å½•è·¯å¾„å¯¹è±¡ |

<<< @/snippets/weibo/user-get-add.py{14,15,23-25}

::: tip :bulb: æç¤º
- æ­¤ä¸º `cli` æ¨¡å¼çš„æ¥å£ï¼Œå¼€å‘è€…å¯è‡ªè¡Œå®šä¹‰åˆ›å»ºç”¨æˆ·ç›®å½•çš„åŠŸèƒ½ã€‚
- ä¸è®¾ç½® `mode` å‚æ•°æ—¶ï¼Œé»˜è®¤ä¸º `PLEASE_SETUP_MODE` ç›®å½•ã€‚
:::

### è·å–ç”¨æˆ·ä¿¡æ¯(uid) ğŸŸ¢

å¼‚æ­¥æ–¹æ³•ï¼Œç”¨äºè·å–æŒ‡å®šç”¨æˆ·çš„ä¿¡æ¯ã€‚

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| uid | str | ç”¨æˆ·ID |

| è¿”å› | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| UserInfoFilter | JsonModel | ç”¨æˆ·ä¿¡æ¯è¿‡æ»¤å™¨ï¼ŒåŒ…å«ç”¨æˆ·ä¿¡æ¯çš„_to_rawã€_to_dictæ–¹æ³• |

<<< @/snippets/weibo/user-profile.py{17}

### è·å–ç”¨æˆ·ä¿¡æ¯(æ˜µç§°) ğŸŸ¢

å¼‚æ­¥æ–¹æ³•ï¼Œé€šè¿‡ç”¨æˆ·æ˜µç§°è·å–ç”¨æˆ·ä¿¡æ¯ã€‚

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| screen_name | str | ç”¨æˆ·æ˜µç§° |

| è¿”å› | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| UserInfoFilter | JsonModel | ç”¨æˆ·ä¿¡æ¯è¿‡æ»¤å™¨ï¼ŒåŒ…å«ç”¨æˆ·ä¿¡æ¯çš„_to_rawã€_to_dictæ–¹æ³• |

<<< @/snippets/weibo/user-profile-by-name.py{17-19}

### è·å–ç”¨æˆ·è¯¦æƒ… ğŸŸ¢

å¼‚æ­¥æ–¹æ³•ï¼Œç”¨äºè·å–æŒ‡å®šç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯ã€‚

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| uid | str | ç”¨æˆ·ID |

| è¿”å› | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| UserDetailFilter | JsonModel | ç”¨æˆ·è¯¦ç»†ä¿¡æ¯è¿‡æ»¤å™¨ï¼ŒåŒ…å«ç”¨æˆ·è¯¦ç»†ä¿¡æ¯çš„_to_rawã€_to_dictæ–¹æ³• |

<<< @/snippets/weibo/user-detail.py{17}

### æå–å¾®åšç”¨æˆ·id ğŸŸ¢

å¼‚æ­¥æ–¹æ³•ï¼Œç”¨äºä»å¾®åšé“¾æ¥ä¸­æå–å¹¶è¿”å›ç”¨æˆ·IDã€‚

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| url | str | å¾®åšé“¾æ¥ |

| è¿”å› | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| uid | str | ç”¨æˆ·ID |

<<< @/snippets/weibo/extract-uid.py{15-17}

### å•ä¸ªå¾®åšæ•°æ® ğŸŸ¢

å¼‚æ­¥æ–¹æ³•ï¼Œç”¨äºè·å–å•æ¡å¾®åšçš„æ•°æ®ã€‚

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| weibo_id | str | å¾®åšID |

| è¿”å› | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| WeiboDetailFilter | JsonModel | å¾®åšè¯¦ç»†ä¿¡æ¯è¿‡æ»¤å™¨ï¼ŒåŒ…å«å¾®åšè¯¦ç»†ä¿¡æ¯çš„_to_rawã€_to_dictæ–¹æ³• |

<<< @/snippets/weibo/one-weibo.py{17}

### ç”¨æˆ·å¾®åšæ•°æ® ğŸŸ¢

å¼‚æ­¥æ–¹æ³•ï¼Œç”¨äºè·å–ç”¨æˆ·å¾®åšæ•°æ®ã€‚

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| uid | str | ç”¨æˆ·ID |
| page | int | é¡µæ•° |
| feature | int | å¾®åšç±»å‹ |
| since_id | str | èµ·å§‹å¾®åšID |
| max_counts | int | æœ€å¤§å¾®åšæ•° |

| è¿”å› | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| UserWeiboFilter | JsonModel | ç”¨æˆ·å¾®åšä¿¡æ¯è¿‡æ»¤å™¨ï¼ŒåŒ…å«ç”¨æˆ·å¾®åšä¿¡æ¯çš„_to_rawã€_to_dictæ–¹æ³• |

<<< @/snippets/weibo/user-weibo.py{17-23}

## utilsæ¥å£åˆ—è¡¨

### ç®¡ç†å®¢æˆ·ç«¯é…ç½® ğŸŸ¢

ç±»æ–¹æ³•ï¼Œç”¨äºç®¡ç†å®¢æˆ·ç«¯é…ç½®ã€‚

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| æ—  | æ—  | æ—  |

| è¿”å› | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| é…ç½®æ–‡ä»¶å€¼ | Any | é…ç½®æ–‡ä»¶å€¼ |

<<< @/snippets/weibo/client-config.py{4,5,7,8,10,11}

### ç”Ÿæˆè®¿å®¢ Cookie ğŸŸ¢

ç±»æ–¹æ³•ï¼Œç”¨äºç”Ÿæˆè®¿å®¢ Cookieã€‚

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| æ—  | æ—  | æ—  |

| è¿”å› | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| visitor_cookie | str | è®¿å®¢ Cookie |

<<< @/snippets/weibo/visitor-cookie.py{7}

### æå–å¾®åš ID ğŸŸ¢

ç±»æ–¹æ³•ï¼Œä»å¾®åšé“¾æ¥ä¸­æå–å¾®åšIDã€‚

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| url | str | å¾®åšé“¾æ¥ |

| è¿”å› | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| weibo_id | str | å¾®åšID |

<<< @/snippets/weibo/weibo-id.py#single-weibo-id-snippet{8}

### æå–åˆ—è¡¨å¾®åš ID ğŸŸ¢

ç±»æ–¹æ³•ï¼Œä»å¾®åšé“¾æ¥åˆ—è¡¨ä¸­æå–å¾®åšIDã€‚

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| urls | List[str] | å¾®åšé“¾æ¥åˆ—è¡¨ |

| è¿”å› | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| weibo_ids | List[str] | å¾®åšIDåˆ—è¡¨ |

<<< @/snippets/weibo/weibo-id.py#multi-weibo-id-snippet{19,22}

### æå–å¾®åšç”¨æˆ· ID ğŸŸ¢

ç±»æ–¹æ³•ï¼Œä»å¾®åšé“¾æ¥ä¸­æå–ç”¨æˆ·IDã€‚

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| url | str | å¾®åšä¸»é¡µé“¾æ¥ |

| è¿”å› | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| uid | str | ç”¨æˆ·ID |

<<< @/snippets/weibo/weibo-uid.py#single-weibo-uid-snippet{8}

::: tip :grey_exclamation: æç¤º
- ä½¿æ•°æ®æ¥å£æ–¹æ³•é‡Œçš„ `extract_weibo_uid` æ–¹æ³•å¯ä»¥æ›´å…¨é¢çš„å¤„ç†å¾®åšé“¾æ¥ï¼Œè¯¥æ–¹æ³•ä»…é€‚ç”¨ä¸éæ˜µç§°é“¾æ¥çš„æå–ã€‚
:::

### æå–åˆ—è¡¨å¾®åšç”¨æˆ· ID ğŸŸ¢

ç±»æ–¹æ³•ï¼Œä»å¾®åšé“¾æ¥åˆ—è¡¨ä¸­æå–ç”¨æˆ·IDã€‚

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| urls | List[str] | å¾®åšä¸»é¡µé“¾æ¥åˆ—è¡¨ |

| è¿”å› | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| uids | List[str] | ç”¨æˆ·IDåˆ—è¡¨ |

<<< @/snippets/weibo/weibo-uid.py#multi-weibo-uid-snippet{27,30}

### æå–å¾®åšç”¨æˆ·æ˜µç§° ğŸŸ¢

ç±»æ–¹æ³•ï¼Œä»å¾®åšé“¾æ¥ä¸­æå–ç”¨æˆ·æ˜µç§°ã€‚

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| url | str | å¾®åšä¸»é¡µé“¾æ¥ |

| è¿”å› | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| screen_name | str | ç”¨æˆ·æ˜µç§° |

<<< @/snippets/weibo/weibo-screen-name.py#single-weibo-screen_name-snippet{8}

### æå–åˆ—è¡¨å¾®åšç”¨æˆ·æ˜µç§° ğŸŸ¢

ç±»æ–¹æ³•ï¼Œä»å¾®åšé“¾æ¥åˆ—è¡¨ä¸­æå–ç”¨æˆ·æ˜µç§°ã€‚

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| urls | List[str] | å¾®åšä¸»é¡µé“¾æ¥åˆ—è¡¨ |

| è¿”å› | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| screen_names | List[str] | ç”¨æˆ·æ˜µç§°åˆ—è¡¨ |

<<< @/snippets/weibo/weibo-screen-name.py#multi-weibo-screen_name-snippet{20,23}

::: tip :information_source: æç¤º
`F2` ä¼šè‡ªåŠ¨å¤„ç†ç¼–ç ï¼Œæ— éœ€æ‹…å¿ƒä¸­æ–‡å­—ç¬¦è½¬ä¹‰é—®é¢˜ã€‚
:::

### å…¨å±€æ ¼å¼åŒ–æ–‡ä»¶å ğŸŸ¢

æ ¹æ®é…ç½®æ–‡ä»¶çš„å…¨å±€æ ¼å¼åŒ–æ–‡ä»¶åã€‚
::: details :page_facing_up: æ ¼å¼åŒ–æ–‡ä»¶åè§„åˆ™
- `Windows` æ–‡ä»¶åé•¿åº¦é™åˆ¶ä¸º `255` ä¸ªå­—ç¬¦, å¼€å¯äº†é•¿æ–‡ä»¶åæ”¯æŒåä¸º `32,767` ä¸ªå­—ç¬¦ã€‚
- `Unix` æ–‡ä»¶åé•¿åº¦é™åˆ¶ä¸º `255` ä¸ªå­—ç¬¦ã€‚
- å–å»é™¤åçš„ `20` ä¸ªå­—ç¬¦, åŠ ä¸Šåç¼€, ä¸€èˆ¬ä¸ä¼šè¶…è¿‡ `255` ä¸ªå­—ç¬¦ã€‚
- å¼€å‘è€…å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚è‡ªå®šä¹‰ `custom_fields` å­—æ®µï¼Œå®ç°è‡ªå®šä¹‰æ–‡ä»¶åã€‚
:::

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| naming_template | str | æ–‡ä»¶çš„å‘½åæ¨¡æ¿ |
| weibo_data | dict | ä½œå“æ•°æ®çš„å­—å…¸ |
| custom_fields | dict | ç”¨æˆ·è‡ªå®šä¹‰å­—æ®µ, ç”¨äºæ›¿ä»£é»˜è®¤çš„å­—æ®µå€¼ |

| è¿”å› | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| file_name | str | æ ¼å¼åŒ–åçš„æ–‡ä»¶å |

<<< @/snippets/weibo/format-file-name.py{13,19,24,28,30-33}

### åˆ›å»ºç”¨æˆ·ç›®å½• ğŸŸ¢

ç”¨äºåˆ›å»ºç”¨æˆ·ç›®å½•ï¼Œå¦‚æœç›®å½•å·²å­˜åœ¨åˆ™ä¸åˆ›å»ºã€‚

::: details :open_file_folder: ç”¨æˆ·ç›®å½•ç»“æ„
å¦‚æœæœªåœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šè·¯å¾„ï¼Œåˆ™é»˜è®¤ä¸º `Download`ã€‚æ”¯æŒç»å¯¹ä¸ç›¸å¯¹è·¯å¾„ã€‚
```bash
â”œâ”€â”€ Download
â”‚   â”œâ”€â”€ weibo
â”‚   â”‚   â”œâ”€â”€ post
â”‚   â”‚   â”‚   â”œâ”€â”€ user_nickname
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ 2023-12-31_23-59-59_desc
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ 2023-12-31_23-59-59_desc-video.mp4
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ 2023-12-31_23-59-59_desc-desc.txt
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ 2023-12-31_23-59-59_desc-cover.jpg
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ......
â”‚   â”‚   â”œâ”€â”€ like
â”‚   â”‚   â”œâ”€â”€ ...
```
:::

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| kwargs | dict | clié…ç½®æ–‡ä»¶ |
| nickname | Union[str, int] | ç”¨æˆ·æ˜µç§° |

| è¿”å› | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| user_path | Path | ç”¨æˆ·ç›®å½•è·¯å¾„å¯¹è±¡ |

<<< @/snippets/weibo/user-folder.py#create-user-folder{17,18}

### é‡å‘½åç”¨æˆ·ç›®å½• ğŸŸ¢

ç”¨äºé‡å‘½åç”¨æˆ·ç›®å½•ã€‚

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| old_path | Path | æ—§çš„ç”¨æˆ·ç›®å½•è·¯å¾„å¯¹è±¡ |
| new_nickname | str | æ–°çš„ç”¨æˆ·æ˜µç§° |

| è¿”å› | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| new_path | Path | æ–°çš„ç”¨æˆ·ç›®å½•è·¯å¾„å¯¹è±¡ |

<<< @/snippets/weibo/user-folder.py#rename-user-folder{20-24,28,29}

::: tip :bulb: æç¤º
å¦‚æœç›®å½•ä¸å­˜åœ¨ä¼šå…ˆåˆ›å»ºè¯¥ç”¨æˆ·ç›®å½•å†é‡å‘½åã€‚
:::

### åˆ›å»ºæˆ–é‡å‘½åç”¨æˆ·ç›®å½• ğŸŸ¢

ç”¨äºåˆ›å»ºæˆ–é‡å‘½åç”¨æˆ·ç›®å½•ã€‚ä¸ºä¸Šé¢2ä¸ªæ¥å£çš„ç»„åˆã€‚

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| kwargs | dict | clié…ç½®æ–‡ä»¶ |
| local_user_data | dict | æœ¬åœ°ç”¨æˆ·æ•°æ® |
| current_nickname | str | å½“å‰ç”¨æˆ·æ˜µç§° |

| è¿”å› | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| user_path | Path | ç”¨æˆ·ç›®å½•è·¯å¾„å¯¹è±¡ |

::: tip :information_source: æç¤º
è¯¥æ¥å£å¾ˆå¥½çš„è§£å†³äº†ç”¨æˆ·æ”¹åä¹‹åé‡å¤åˆ›å»ºç›®å½•çš„é—®é¢˜ã€‚é›†æˆåœ¨ `handler` æ¥å£ä¸­ã€‚å¼€å‘è€…æ— éœ€å…³å¿ƒï¼Œç›´æ¥è°ƒç”¨ `handler` çš„æ•°æ®æ¥å£å³å¯ã€‚
:::

### æå–å¾®åšæ–‡æ¡ˆ ğŸŸ¢

ç”¨äºæå–å¾®åšæ–‡æ¡ˆï¼Œæ’é™¤æœ€åçš„é“¾æ¥ã€‚

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| text | str | å¾®åšæ–‡æ¡ˆ |

| è¿”å› | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| text | str | æå–åçš„å¾®åšæ–‡æ¡ˆ |

<<< @/snippets/weibo/extract-desc.py{18}

## crawleræ¥å£åˆ—è¡¨

### ç”¨æˆ·ä¿¡æ¯æ¥å£ ğŸŸ¢

ç”¨äºè·å–ç”¨æˆ·ä¿¡æ¯ã€‚

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| params | UserInfo | æˆ·ä¿¡æ¯æ¥å£æ¨¡å‹ |

| è¿”å› | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| _fetch_get_json | dict | ç”¨æˆ·ä¿¡æ¯æ•°æ® |

### ç”¨æˆ·è¯¦æƒ…æ¥å£ ğŸŸ¢

ç”¨äºè·å–ç”¨æˆ·è¯¦æƒ…ã€‚

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| params | UserDetail | ç”¨æˆ·è¯¦æƒ…æ¥å£æ¨¡å‹ |

| è¿”å› | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| _fetch_get_json | dict | ç”¨æˆ·è¯¦æƒ…æ•°æ® |

### ç”¨æˆ·å¾®åšæ¥å£ ğŸŸ¢

ç”¨äºè·å–ç”¨æˆ·å¾®åšã€‚

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| params | UserWeibo | ç”¨æˆ·å¾®åšæ¥å£æ¨¡å‹ |

| è¿”å› | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| _fetch_get_json | dict | ç”¨æˆ·å¾®åšæ•°æ® |

### å•æ¡å¾®åšæ¥å£ ğŸŸ¢

ç”¨äºè·å–å•æ¡å¾®åšã€‚

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| params | WeiboDetail | å•æ¡å¾®åšæ¥å£æ¨¡å‹ |

| è¿”å› | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| _fetch_get_json | dict | å•æ¡å¾®åšæ•°æ® |

## dlæ¥å£åˆ—è¡¨

### åˆ›å»ºä¸‹è½½ä»»åŠ¡ ğŸŸ¢


### å¤„ç†ä¸‹è½½ä»»åŠ¡ ğŸŸ¢


### ä¸‹è½½æ–‡æ¡ˆ ğŸŸ¢


### ä¸‹è½½è§†é¢‘ğŸŸ¢


### ä¸‹è½½å›¾é›† ğŸŸ¢
